# call convention

-20 # return value
-16 # int a
-12 # int b 
-8 $ip
-4 $fp
0 int x
4 int y

test: # int test(int a, int b);
  # int x
  # int y
  
  enter 8 -> {
    push $fp
    $fp = $sp
    $sp += 8
  }
  
  load $fp-12 4 # int b
  load $fp-16 4 # int a
  
  addr $fp-20
  const 4
  store
  
  leave -> {
    $sp = $fp
    $fp = pop()
  }
  
  jmp

main:
  alloc 32
  
  const 5 # int a
  const 6 # int b
  
  call test -> {
    push $ip
    jmp test
  }
  
  free 8
